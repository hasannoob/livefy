<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Livefy - Live Cricket & TV Streaming</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f9f9f9; color: #222;
      display: flex; flex-direction: column; min-height: 100vh;
    }
    header {
      background: #0084ff; color: white; padding: 1rem; font-size: 1.6rem;
      font-weight: 700; text-align: center; position: sticky; top: 0; z-index: 1100;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    nav {
      position: fixed; bottom: 0; width: 100%; background: white;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
      display: flex; justify-content: space-around; align-items: center;
      height: 60px; z-index: 1100;
    }
    nav button {
      background: none; border: none; font-size: 0.9rem; color: #444;
      display: flex; flex-direction: column; align-items: center; cursor: pointer;
      padding: 5px; transition: color 0.3s ease;
    }
    nav button.active {
      color: #0084ff; font-weight: 700;
    }
    nav button svg {
      width: 24px; height: 24px; margin-bottom: 3px; fill: currentColor;
    }
    main {
      flex-grow: 1; padding: 1rem 1rem 70px; max-width: 700px; margin: 0 auto;
    }
    .match-card {
      background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 1rem 1.4rem; margin-bottom: 1rem;
      user-select: none; cursor: default;
    }
    .match-card:hover {
      box-shadow: 0 5px 15px rgba(0,0,0,0.18);
    }
    .match-header {
      display: flex; justify-content: space-between; align-items: center;
      font-weight: 700; font-size: 1.15rem; color: #222; user-select: text;
    }
    .team-name { flex: 1; text-align: center; }
    .team-name.left { text-align: left; }
    .team-name.right { text-align: right; }
    .live-label {
      flex: 0 0 60px; text-align: center; color: #28a745; font-weight: 900;
      font-size: 1.3rem; animation: bounce 1s infinite; user-select: none;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    .match-details {
      margin-top: 0.6rem; font-weight: 700; font-size: 1.1rem;
      text-align: center; color: #555; user-select: text;
    }
    .watch-now {
      margin-top: 10px; display: block; text-align: center;
      background-color: #0084ff; color: white; padding: 8px 0;
      font-weight: 700; border-radius: 30px; text-decoration: none;
      width: 140px; margin-left: auto; margin-right: auto;
      box-shadow: 0 4px 10px rgba(0,132,255,0.5);
      transition: background-color 0.3s ease;
      user-select: none; cursor: pointer;
    }
    .watch-now:hover { background-color: #005bb5; }
    .status-upcoming {
      color: #ff9800; font-weight: 700;
      text-align: center; font-size: 1.05rem; margin-bottom: 0.6rem;
      user-select: none;
    }
    .status-completed {
      color: #666; font-weight: 600; font-style: italic;
      text-align: center; margin-bottom: 0.6rem; user-select: none;
    }
    .countdown {
      font-weight: 700; color: #ff5722; font-size: 1rem;
      text-align: center; margin-top: 5px; user-select: none;
    }
    .channel-list {
      display: grid; grid-template-columns: repeat(auto-fill,minmax(120px,1fr));
      gap: 1rem; margin-top: 1rem;
    }
    .channel-card {
      background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.12);
      text-align: center; padding: 0.8rem 0.4rem;
      cursor: pointer; transition: box-shadow 0.3s ease; user-select: none;
    }
    .channel-card:hover { box-shadow: 0 6px 20px rgba(0,0,0,0.2); }
    .channel-logo {
      width: 70px; height: 50px; object-fit: contain; margin-bottom: 8px;
      user-select: none;
    }
    .channel-name { font-weight: 600; font-size: 0.95rem; color: #222; }
    .modal {
      display: none; position: fixed; z-index: 1200; left: 0; top: 0;
      width: 100vw; height: 100vh; background-color: rgba(0,0,0,0.8);
      justify-content: center; align-items: center;
    }
    .modal.active { display: flex; }
    .modal-content {
      position: relative; background: #000;
      max-width: 90vw; max-height: 80vh; width: 640px;
      border-radius: 10px; box-shadow: 0 0 25px rgba(0,0,0,0.7);
      display: flex; flex-direction: column;
    }
    video, iframe {
      width: 100%; height: 100%; border-radius: 10px;
      background: black;
    }
    #iframe-player { height: 360px; }
    .modal-close {
      position: absolute; top: 10px; right: 14px; font-size: 30px;
      color: white; cursor: pointer; user-select: none;
      font-weight: 900; background: rgba(0,0,0,0.4);
      border-radius: 50%; width: 38px; height: 38px; line-height: 38px;
      text-align: center;
    }
  </style>
</head>
<body>

<header>Livefy - Live Cricket & TV Streaming</header>

<main id="main-content"></main>

<nav>
  <button id="homeBtn" title="Home" class="active">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    Home
  </button>
  <button id="liveTvBtn" title="Live TV">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 6h-3l-2-2H8L6 6H3c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM7 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/></svg>
    Live TV
  </button>
  <button id="sportsTvBtn" title="Sports TV">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-6 8v-2h12v2H6z"/></svg>
    Sports TV
  </button>
</nav>

<div id="video-modal" class="modal">
  <div class="modal-content">
    <span id="modal-close" class="modal-close">&times;</span>
    <video id="video-player" controls style="display:none;"></video>
    <iframe id="iframe-player" style="display:none;" frameborder="0" allowfullscreen></iframe>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  const homeMatches = [
    { teams: ['West Indies üáÆüá≥', 'Pakistan üáµüá∞'], status: 'Live', score: '', stream: 'https://tvsen5.aynaott.com/Ptvsports/index.m3u8' },
    { teams: ['India üáÆüá≥', 'Australia üá¶üá∫'], status: 'Upcoming', startTime: new Date(new Date().getTime() + 2*60*60*1000), stream: 'video.mp4' },
    { teams: ['Chelsea üè¥', 'Leverkusen üè¥'], status: 'Live', score: '2nd Half - 1-0', stream: 'https://cdn.jwplayer.com/live/events/TCpvrJpA.m3u8?exp=1754697600&sig=5387f62823bd21031887c6754299ffb5' }
  ];

  const liveTvChannels = [
    { name: "News Channel 1", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/BL_Logo.svg/120px-BL_Logo.svg.png", stream: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8" },
    { name: "YouTube Live", logo: "https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg", stream: "https://www.youtube.com/embed/21X5lGlDOfg" },
    { name: "Sample MP4", logo: "https://upload.wikimedia.org/wikipedia/commons/4/4f/Iconic_image.jpg", stream: "sample.mp4" }
  ];

  const sportsTvChannels = [
    { name: "PTV Sports", logo: "https://upload.wikimedia.org/wikipedia/en/e/e4/PTV_Sports.png", stream: "https://tvsen5.aynaott.com/Ptvsports/index.m3u8" },
    { name: "T Sports", logo: "https://upload.wikimedia.org/wikipedia/commons/4/4c/T_Sports_logo.svg", stream: "https://tvsen5.aynaott.com/tsports/tracks-v1a1/mono.ts.m3u8" }
  ];

  const mainContent = document.getElementById('main-content');
  const homeBtn = document.getElementById('homeBtn');
  const liveTvBtn = document.getElementById('liveTvBtn');
  const sportsTvBtn = document.getElementById('sportsTvBtn');
  const modal = document.getElementById('video-modal');
  const video = document.getElementById('video-player');
  const iframe = document.getElementById('iframe-player');
  const modalClose = document.getElementById('modal-close');
  let hls;

  function pad(num) { return num < 10 ? '0' + num : num; }

  function createCountdown(targetDate, onEnd) {
    const countdownEl = document.createElement('div');
    countdownEl.className = 'countdown';
    function updateCountdown() {
      const now = new Date();
      const diff = targetDate - now;
      if(diff <= 0) {
        countdownEl.textContent = "Match started!";
        clearInterval(timer);
        onEnd();
        return;
      }
      const hours = Math.floor(diff / 1000 / 3600);
      const minutes = Math.floor((diff / 1000 % 3600) / 60);
      const seconds = Math.floor((diff / 1000) % 60);
      countdownEl.textContent = `Starting in: ${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
    }
    updateCountdown();
    const timer = setInterval(updateCountdown, 1000);
    return countdownEl;
  }

  function openModal(streamUrl) {
    video.style.display = 'none';
    iframe.style.display = 'none';
    video.src = '';
    iframe.src = '';
    if(hls) { hls.destroy(); hls = null; }

    if (streamUrl.endsWith('.m3u8')) {
      video.style.display = 'block';
      if (Hls.isSupported()) {
        hls = new Hls();
        hls.loadSource(streamUrl);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = streamUrl;
        video.addEventListener('loadedmetadata', () => video.play());
      }
    }
    else if (streamUrl.endsWith('.mp4')) {
      video.style.display = 'block';
      video.src = streamUrl;
      video.play();
    }
    else {
      iframe.style.display = 'block';
      iframe.src = streamUrl;
    }

    modal.classList.add('active');
  }

  function closeModal() {
    modal.classList.remove('active');
    video.pause();
    video.src = '';
    iframe.src = '';
    if(hls) { hls.destroy(); hls = null; }
  }

  modalClose.addEventListener('click', closeModal);
  modal.addEventListener('click', e => { if(e.target === modal) closeModal(); });

  function renderHome() {
    mainContent.innerHTML = '';
    homeMatches.forEach(match => {
      const card = document.createElement('div');
      card.className = 'match-card';

      if(match.status === 'Live') {
        card.innerHTML = `
          <div class="match-header">
            <div class="team-name left">${match.teams[0]}</div>
            <div class="live-label">LIVE</div>
            <div class="team-name right">${match.teams[1]}</div>
          </div>
          <div class="match-details">${match.score}</div>
          <a href="#" class="watch-now">Watch Now</a>
        `;
      } else if(match.status === 'Upcoming') {
        card.innerHTML = `
          <div class="match-header">
            <div class="team-name left">${match.teams[0]}</div>
            <div class="status-upcoming">UPCOMING</div>
            <div class="team-name right">${match.teams[1]}</div>
          </div>
          <div class="match-details"></div>
          <a href="#" class="watch-now" style="pointer-events:none;opacity:0.6;">Watch Soon</a>
        `;
      } else if(match.status === 'Completed') {
        card.innerHTML = `
          <div class="match-header">
            <div class="team-name left">${match.teams[0]}</div>
            <div class="status-completed">COMPLETED</div>
            <div class="team-name right">${match.teams[1]}</div>
          </div>
          <div class="match-details">${match.result || ''}</div>
        `;
      }

      if(match.status === 'Upcoming' && match.startTime) {
        const countdownEl = createCountdown(match.startTime, () => {
          match.status = 'Live';
          match.score = 'Match Started!';
          renderHome();
        });
        card.querySelector('.match-details').appendChild(countdownEl);
      }

      if(match.stream && match.status === 'Live') {
        card.querySelector('.watch-now').addEventListener('click', e => {
          e.preventDefault();
          openModal(match.stream);
        });
      }

      mainContent.appendChild(card);
    });
  }

  function renderChannels(channels) {
    mainContent.innerHTML = '';
    if(channels.length === 0) {
      mainContent.innerHTML = `<p style="text-align:center; font-weight:700; color:#555;">No channels found.</p>`;
      return;
    }
    const grid = document.createElement('div');
    grid.className = 'channel-list';
    channels.forEach(ch => {
      const card = document.createElement('div');
      card.className = 'channel-card';
      card.innerHTML = `
        <img src="${ch.logo}" alt="${ch.name} logo" class="channel-logo" />
        <div class="channel-name">${ch.name}</div>
      `;
      card.addEventListener('click', () => openModal(ch.stream));
      grid.appendChild(card);
    });
    mainContent.appendChild(grid);
  }

  function setActiveButton(activeBtn) {
    [homeBtn, liveTvBtn, sportsTvBtn].forEach(btn => btn.classList.remove('active'));
    activeBtn.classList.add('active');
  }

  homeBtn.addEventListener('click', () => { setActiveButton(homeBtn); renderHome(); });
  liveTvBtn.addEventListener('click', () => { setActiveButton(liveTvBtn); renderChannels(liveTvChannels); });
  sportsTvBtn.addEventListener('click', () => { setActiveButton(sportsTvBtn); renderChannels(sportsTvChannels); });

  renderHome();
</script>
</body>
</html>
